Normalised task
ifelse
(
    {Task}='[Brother] Relationship with Siblings', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Business Owner] AS3 Time', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Consultant] New Client Engagements', '[Professional] Service Provider - Work/Job',
    {Task}='[Consultant] Service Provider Partners', '[Professional] Service Provider - Work/Job',
    {Task}='[Family-Man] Home Affairs / DIY', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Father] Relationship with AYK', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Father] Relationship with MJK', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Father] Relationship with SK', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Home Owner] Home Improvements / DIY', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Individual] Blogging', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Individual] Coding / Tech / Builder', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Individual] Driving Car Time', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Individual] Health & Fitness - Cycling n Running', '[Individual] Health, Fitness & Wellbeing',
    {Task}='[Investor] Wealth & Finances - Share Trading JSE', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Job Hunter] Job Hunting Companies', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}='[Professional] Work Social Relationships', '[Professional] Service Provider - Work/Job',
    {Task}='[Software Professional] Searching for Growth', '[Professional] Service Provider - Work/Job',
    {Task}='[Son Bro-In-Law] Relationship with In-Laws', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Son] Relationship with Mommy', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='[Uncle] Relationship with Nieces n Nephews', '[Family-Man] Family Time (#Father #Brother #Son #Relatives)',
    {Task}='zz [Community Member] Community NBHW Patrols', '[Friend] Social',
    {Task}='[Entrepreneur] Ideas / Networking', '[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)',
    {Task}
)

txMonth
formatDate({Date}, 'MMM')

txMonthNum
parseInt(formatDate({Date},"M"))

PrioritisedPersona
ifelse
(
    {NormalisedTask}='[Family-Man] Family Time (#Father #Brother #Son #Relatives)','P5 Family',
    {NormalisedTask}='[Friend] Social','P6 Friend Social',
    {NormalisedTask}='[Husband] Marital/Wife #Husband','P4 Husband',
    {NormalisedTask}='[Individual] Health, Fitness & Wellbeing','P2 Individual',
    {NormalisedTask}='[Individual] Knowledge-Base - Books/Video/Podcasts','P2 Individual',
    {NormalisedTask}='[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)','P2 Individual',
    {NormalisedTask}='[Individual] Rest n Sleep','P0 Life Constraints (Sleep)',
    {NormalisedTask}='[Individual] Spirituality','P1 Muslim',
    {NormalisedTask}='[Professional] Service Provider - Work/Job','P3 Professional',
    'ERROR'
)



MetaWorkLife
ifelse
(
    {PrioritisedPersona}='P5 Family','Life',
    {PrioritisedPersona}='P6 Friend Social','Life',
    {PrioritisedPersona}='P4 Husband','Life',
    {PrioritisedPersona}='P2 Individual','Life',
    {PrioritisedPersona}='P0 Life Constraints (Sleep)','Sleep-Life',
    {PrioritisedPersona}='P1 Muslim','Life',
    {PrioritisedPersona}='P3 Professional','Work',
    'ERROR'
)


startedAtHourOfDay (Update: 2 Jan 2025 - this code is throwing errors, removed from QS)
/* from the Date/Time, extract the hour from started time */
parseInt(left({Started At}, 2))

endedAtHourOfDay  (Update: 2 Jan 2025 - this code is throwing errors, removed from QS)
/* from the Date/Time, extract the hour in 24-hour day */
parseInt(left({Ended At}, 2))

txDay
//Day

ifelse
(
    extract('WD',{Date})=1, '_07 Sunday',
    extract('WD',{Date})=2, '_01 Monday',
    extract('WD',{Date})=3, '_02 Tuesday',
    extract('WD',{Date})=4, '_03 Wednesday',
    extract('WD',{Date})=5, '_04 Thursday',
    extract('WD',{Date})=6, '_05 Friday',
    extract('WD',{Date})=7, '_06 Saturday',
    'ERROR'
)

//formatDate({Date}, 'd')
// extract('DD',{Date})

txTypeofDay
ifelse
(
    {txDay}='_01 Monday', 'Weekday',
    {txDay}='_02 Tuesday', 'Weekday',
    {txDay}='_03 Wednesday', 'Weekday',
    {txDay}='_04 Thursday', 'Weekday',
    {txDay}='_05 Friday', 'Weekday',
    {txDay}='_06 Saturday', 'Weekend',
    {txDay}='_07 Sunday', 'Weekend',
    'ERROR'
)

txWeekNum
ifelse(
    extract("WD", {Date}) = 1,
    dateDiff(truncDate("WK", truncDate('YYYY', {Date})), {Date}, 'WK'),
    dateDiff(truncDate("WK", truncDate('YYYY', {Date})), {Date}, 'WK')+1
)

PersonaTier2
ifelse
(
    {NormalisedTask}='[Family-Man] Family Time (#Father #Brother #Son #Relatives)','Family Time',
    {NormalisedTask}='[Friend] Social','Social',
    {NormalisedTask}='[Husband] Marital/Wife #Husband','Husband/Wife',
    {NormalisedTask}='[Individual] Health, Fitness & Wellbeing','Me Time',
    {NormalisedTask}='[Individual] Knowledge-Base - Books/Video/Podcasts','Me Time',
    {NormalisedTask}='[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)','Me Time',
    {NormalisedTask}='[Individual] Rest n Sleep','Rest/Sleep',
    {NormalisedTask}='[Individual] Spirituality','Me Time',
    {NormalisedTask}='[Professional] Service Provider - Work/Job','Work Time',
    'ERROR'
)

socialContext
ifelse
(
    //drill down social context
    {PersonaTier2}='Social',
    //then...search notes for context
    ifelse
    (
        contains({Notes},'mentor',CASE_INSENSITIVE), 'Professional-Coaching/Mentoring',
        contains({Notes},'coach',CASE_INSENSITIVE), 'Professional-Coaching/Mentoring',
        contains({Notes},'network',CASE_INSENSITIVE), 'Professional-Networking',
        contains({Notes},'rayner',CASE_INSENSITIVE), 'Professional-Networking',
        contains({Notes},'dallas',CASE_INSENSITIVE), 'Professional-Networking',
        contains({Notes},'wadee',CASE_INSENSITIVE), 'Professional-Networking',
        contains({Notes},'adhil patel visit',CASE_INSENSITIVE), 'Professional-Networking',
        contains({Notes},'aadhil',CASE_INSENSITIVE), 'Professional-Networking',
        //if not above, then it's personal socializing
        'Personal-Nurturing Relationships'
    )
    ,
    //else
    'NA'
    //ignore
)
socialEntity
ifelse
(
    //drill down social context
    {PersonaTier2}='Social',
    //then...search notes for context
    ifelse
    (
        {Notes}='mentoring','Asanda',
 {Notes}='networking','General Networking',
 contains({Notes},'nofal',CASE_INSENSITIVE), 'Joburg Friends',
        contains({Notes},'patel',CASE_INSENSITIVE), 'Joburg Friends',
        contains({Notes},'motorvations',CASE_INSENSITIVE), 'Uni Friends',
        contains({Notes},'hamza',CASE_INSENSITIVE), 'Uni Friends',
        contains({Notes},'salik',CASE_INSENSITIVE), 'UK Friends',
        contains({Notes},'justin',CASE_INSENSITIVE), 'Justin',
        contains({Notes},'Asanda',CASE_INSENSITIVE), 'Asanda',
        contains({Notes},'Asanda',CASE_INSENSITIVE), 'Asanda',
        contains({Notes},'Phiona',CASE_INSENSITIVE), 'Phiona',
        contains({Notes},'farid',CASE_INSENSITIVE), 'Farid',
        contains({Notes},'Andrew',CASE_INSENSITIVE), 'Andrew Dallas',
        contains({Notes},'India',CASE_INSENSITIVE), 'India Friends',
        contains({Notes},'divash',CASE_INSENSITIVE), 'Divash',
        contains({Notes},'India',CASE_INSENSITIVE), 'India Friends',
        contains({Notes},'mota',CASE_INSENSITIVE), 'CPT Friends-Motas',
        contains({Notes},'lambat',CASE_INSENSITIVE), 'CPT Friends-Lambats',
        contains({Notes},'sooliman',CASE_INSENSITIVE), 'PMB Friends',
        contains({Notes},'kola',CASE_INSENSITIVE), 'CPT - Neighbours',
        contains({Notes},'nizam',CASE_INSENSITIVE), 'PMB Friends',
        contains({Notes},'ashraf',CASE_INSENSITIVE), 'Joburg Friends',
        contains({Notes},'imran',CASE_INSENSITIVE), 'Joburg Friends',
        contains({Notes},'francois',CASE_INSENSITIVE), 'Franky',
        contains({Notes},'zeyn',CASE_INSENSITIVE), 'PMB Friends',
        contains({Notes},'nikhil',CASE_INSENSITIVE), 'India Friends',
        contains({Notes},'themba',CASE_INSENSITIVE), 'Themba',
        contains({Notes},'umar',CASE_INSENSITIVE), 'Umar',
        contains({Notes},'jarryd',CASE_INSENSITIVE), 'Jarryd',
        contains({Notes},'wayne',CASE_INSENSITIVE), 'Wayne',
        contains({Notes},'uncle AB',CASE_INSENSITIVE), 'CPT - Neighbours',
        contains({Notes},'brandon',CASE_INSENSITIVE), 'CPT - Neighbours',
        contains({Notes},'evane',CASE_INSENSITIVE), 'Joburg Friends',
        contains({Notes},'Haseena',CASE_INSENSITIVE), 'CPT Friends-New',
        contains({Notes},'vaug',CASE_INSENSITIVE), 'Vaugan',
        contains({Notes},'leon',CASE_INSENSITIVE), 'Vaugan',
        contains({Notes},'iby',CASE_INSENSITIVE), 'USA Friends',
        contains({Notes},'rayner',CASE_INSENSITIVE), 'Mark Rayner',
        contains({Notes},'mosajee',CASE_INSENSITIVE), 'Moosajee',
        
        //if not above, then it's personal socializing
        'General-Nurturing Relationships'
    )
    ,
    //else
    'NA'
    //ignore
)

txNotes
ifelse(
    strlen({Notes})>0,
    {Notes},
    'NA'
    )

txMeTimeBreakdown
ifelse
(
    //drill down me time context
    {PersonaTier2}='Me Time',
    //then...search notes for context
    ifelse
    (
            {NormalisedTask}='[Individual] Health, Fitness & Wellbeing','Health/Fitness',
            {NormalisedTask}='[Individual] Knowledge-Base - Books/Video/Podcasts','Learning',
            {NormalisedTask}='[Individual] Me Time (Bootup, Nothing, PC/Surfing, Journalling, Hobbies, Blogging, DIY, Netflix, Silence - Alone Time)','Alone Time (DIY, Hobbies, Writing)',
            {NormalisedTask}='[Individual] Spirituality','Spiritual',
            {NormalisedTask}='[Individual] Rest n Sleep','Rest/Sleep',
        
        //if not above, then it's NA
        'NA'
    )
    ,
    //else
    'NA'
    //ignore
)

commuteContext
ifelse
(
    //drill down work context
    {PersonaTier2}='Work Time',
    //then...search notes for context
    ifelse
    (
 contains({Notes},'commute',CASE_INSENSITIVE), 'commuting',
                
        //if not above, then it's personal socializing
        'working'
    )
    ,
    //else
    'NA'
    //ignore
)


